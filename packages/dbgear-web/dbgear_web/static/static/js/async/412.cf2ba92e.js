"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["412"],{469:function(e,s,a){a.d(s,{z:()=>d});var t=a(8093);a(4517);var l=a(9578),n=a(5191),r=a(1635);let i=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:s,variant:a,size:n,asChild:d=!1,...c}=e,o=d?l.g7:"button";return(0,t.jsx)(o,{"data-slot":"button",className:(0,r.cn)(i({variant:a,size:n,className:s})),...c})}},9851:function(e,s,a){a.d(s,{Ol:()=>r,Zb:()=>n,aY:()=>d,ll:()=>i});var t=a(8093);a(4517);var l=a(1635);function n(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,l.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...a})}function r(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,l.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...a})}function i(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,l.cn)("leading-none font-semibold",s),...a})}function d(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,l.cn)("px-6",s),...a})}},1635:function(e,s,a){a.d(s,{cn:()=>n});var t=a(3749),l=a(992);function n(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,l.m6)((0,t.W)(s))}},8404:function(e,s,a){a.r(s),a.d(s,{component:()=>eu});var t=a(8093),l=a(4517),n=a(5846),r=a(8987),i=a(9851),d=a(469),c=a(1635);function o(e){let{className:s,type:a,...l}=e;return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...l})}var x=a(6957);function u(e){let{className:s,...a}=e;return(0,t.jsx)(x.f,{"data-slot":"label",className:(0,c.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}var m=a(1503);function h(e){let{className:s,orientation:a="horizontal",decorative:l=!0,...n}=e;return(0,t.jsx)(m.f,{"data-slot":"separator",decorative:l,orientation:a,className:(0,c.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...n})}var j=a(9578);let p=(0,a(5191).j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function v(e){let{className:s,variant:a,asChild:l=!1,...n}=e,r=l?j.g7:"span";return(0,t.jsx)(r,{"data-slot":"badge",className:(0,c.cn)(p({variant:a}),s),...n})}function f(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",s),...a})})}function g(e){let{className:s,...a}=e;return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",s),...a})}function b(e){let{className:s,...a}=e;return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",s),...a})}function y(e){let{className:s,...a}=e;return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...a})}function N(e){let{className:s,...a}=e;return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function _(e){let{className:s,...a}=e;return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}var w=a(3219),k=a(6044),C=a(3915),A=a(6332);function z(e){let{fields:s,onEditField:a,onDeleteField:l}=e;return 0===s.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)("p",{children:"No fields defined yet."}),(0,t.jsx)("p",{className:"text-sm",children:'Click "Add Field" to create the first field.'})]}):(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)(f,{children:[(0,t.jsx)(g,{children:(0,t.jsxs)(y,{children:[(0,t.jsx)(N,{className:"w-[140px]",children:"Column Name"}),(0,t.jsx)(N,{className:"w-[140px]",children:"Display Name"}),(0,t.jsx)(N,{className:"w-[130px]",children:"Type"}),(0,t.jsx)(N,{className:"w-[80px]",children:"Nullable"}),(0,t.jsx)(N,{className:"w-[100px]",children:"Constraints"}),(0,t.jsx)(N,{className:"w-[120px]",children:"Default"}),(0,t.jsx)(N,{className:"w-[140px]",children:"Foreign Key"}),(0,t.jsx)(N,{className:"w-[150px]",children:"Comment"}),(0,t.jsx)(N,{className:"w-[100px]",children:"Actions"})]})}),(0,t.jsx)(b,{children:s.map((e,s)=>(0,t.jsxs)(y,{children:[(0,t.jsx)(_,{children:(0,t.jsx)("div",{className:"font-medium",children:e.column_name})}),(0,t.jsx)(_,{children:(0,t.jsx)("div",{className:"text-muted-foreground",children:e.display_name||"-"})}),(0,t.jsx)(_,{children:(0,t.jsx)(v,{variant:"secondary",className:"text-xs",children:e.column_type})}),(0,t.jsx)(_,{children:(0,t.jsx)(v,{variant:e.nullable?"outline":"default",className:"text-xs",children:e.nullable?"Yes":"No"})}),(0,t.jsx)(_,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[e.primary_key&&(0,t.jsxs)(v,{variant:"default",className:"text-xs",children:[(0,t.jsx)(w.Z,{className:"h-3 w-3 mr-1"}),"PK"]}),e.auto_increment&&(0,t.jsx)(v,{variant:"secondary",className:"text-xs",children:"AI"})]})}),(0,t.jsx)(_,{children:(0,t.jsx)("div",{className:"text-sm text-muted-foreground max-w-[120px] truncate",children:e.default_value||"-"})}),(0,t.jsx)(_,{children:(0,t.jsx)("div",{className:"flex items-center space-x-2",children:e.foreign_key?(0,t.jsxs)(v,{variant:"outline",className:"text-xs",children:[(0,t.jsx)(k.Z,{className:"h-3 w-3 mr-1"}),e.foreign_key]}):(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})})}),(0,t.jsx)(_,{children:(0,t.jsx)("div",{className:"text-sm text-muted-foreground max-w-[150px] truncate",children:e.comment||"-"})}),(0,t.jsx)(_,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(d.z,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>a(s),children:(0,t.jsx)(C.Z,{className:"h-3 w-3"})}),(0,t.jsx)(d.z,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-destructive hover:text-destructive",onClick:()=>l(s),children:(0,t.jsx)(A.Z,{className:"h-3 w-3"})})]})})]},`${e.column_name}-${s}`))})]})})}var T=a(9229);function F(e){let{indexes:s,onDeleteIndex:a}=e;return 0===s.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)("p",{children:"No indexes defined yet."}),(0,t.jsx)("p",{className:"text-sm",children:'Click "Add Index" to create the first index.'})]}):(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)(f,{children:[(0,t.jsx)(g,{children:(0,t.jsxs)(y,{children:[(0,t.jsx)(N,{className:"w-[200px]",children:"Index Name"}),(0,t.jsx)(N,{children:"Columns"}),(0,t.jsx)(N,{className:"w-[100px]",children:"Actions"})]})}),(0,t.jsx)(b,{children:s.map((e,s)=>(0,t.jsxs)(y,{children:[(0,t.jsx)(_,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(T.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("div",{className:"font-medium",children:e.index_name}),"PRIMARY"===e.index_name&&(0,t.jsx)(v,{variant:"default",className:"text-xs",children:"Primary"})]})}),(0,t.jsx)(_,{children:(0,t.jsx)("div",{className:"flex items-center space-x-1 flex-wrap gap-1",children:e.columns.map((e,s)=>(0,t.jsx)(v,{variant:"secondary",className:"text-xs",children:e},`${e}-${s}`))})}),(0,t.jsx)(_,{children:(0,t.jsx)(d.z,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-destructive hover:text-destructive",disabled:"PRIMARY"===e.index_name,onClick:()=>a(s),children:(0,t.jsx)(A.Z,{className:"h-3 w-3"})})})]},`${e.index_name}-${s}`))})]})})}var E=a(5731),I=a(3161);function Z(e){let{...s}=e;return(0,t.jsx)(E.fC,{"data-slot":"dialog",...s})}function S(e){let{...s}=e;return(0,t.jsx)(E.h_,{"data-slot":"dialog-portal",...s})}function D(e){let{className:s,...a}=e;return(0,t.jsx)(E.aV,{"data-slot":"dialog-overlay",className:(0,c.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function O(e){let{className:s,children:a,showCloseButton:l=!0,...n}=e;return(0,t.jsxs)(S,{"data-slot":"dialog-portal",children:[(0,t.jsx)(D,{}),(0,t.jsxs)(E.VY,{"data-slot":"dialog-content",className:(0,c.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...n,children:[a,l&&(0,t.jsxs)(E.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(I.Z,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function V(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,c.cn)("flex flex-col gap-2 text-center sm:text-left",s),...a})}function L(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,c.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function R(e){let{className:s,...a}=e;return(0,t.jsx)(E.Dx,{"data-slot":"dialog-title",className:(0,c.cn)("text-lg leading-none font-semibold",s),...a})}var P=a(8811),Y=a(1189),$=a(1850),M=a(4754);function q(e){let{...s}=e;return(0,t.jsx)(P.fC,{"data-slot":"select",...s})}function K(e){let{...s}=e;return(0,t.jsx)(P.B4,{"data-slot":"select-value",...s})}function Q(e){let{className:s,size:a="default",children:l,...n}=e;return(0,t.jsxs)(P.xz,{"data-slot":"select-trigger","data-size":a,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n,children:[l,(0,t.jsx)(P.JO,{asChild:!0,children:(0,t.jsx)(Y.Z,{className:"size-4 opacity-50"})})]})}function B(e){let{className:s,children:a,position:l="popper",...n}=e;return(0,t.jsx)(P.h_,{children:(0,t.jsxs)(P.VY,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...n,children:[(0,t.jsx)(G,{}),(0,t.jsx)(P.l_,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,t.jsx)(H,{})]})})}function U(e){let{className:s,children:a,...l}=e;return(0,t.jsxs)(P.ck,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...l,children:[(0,t.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,t.jsx)(P.wU,{children:(0,t.jsx)($.Z,{className:"size-4"})})}),(0,t.jsx)(P.eT,{children:a})]})}function G(e){let{className:s,...a}=e;return(0,t.jsx)(P.u_,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,t.jsx)(M.Z,{className:"size-4"})})}function H(e){let{className:s,...a}=e;return(0,t.jsx)(P.$G,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,t.jsx)(Y.Z,{className:"size-4"})})}var X=a(7050),J=a(5311);function W(e){let{open:s,onClose:a,onSave:r,mode:c,fieldData:x}=e,m=(0,n.cI)({defaultValues:{column_name:"",display_name:"",column_type:"VARCHAR(255)",nullable:!0,primary_key:"",auto_increment:!1,default_value:"",foreign_key_table:"",foreign_key_column:"",comment:"",expression:"",stored:"",charset:"",collation:""}});(0,l.useEffect)(()=>{if(x&&"edit"===c){var e,s,a;let[t,l]=(null==(e=x.foreign_key)?void 0:e.split("."))||["",""];m.reset({column_name:x.column_name,display_name:x.display_name||"",column_type:x.column_type,nullable:x.nullable,primary_key:(null==(s=x.primary_key)?void 0:s.toString())||"",auto_increment:x.auto_increment||!1,default_value:x.default_value||"",foreign_key_table:t,foreign_key_column:l,comment:x.comment||"",expression:x.expression||"",stored:(null==(a=x.stored)?void 0:a.toString())||"",charset:x.charset||"",collation:x.collation||""})}else"create"===c&&m.reset({column_name:"",display_name:"",column_type:"VARCHAR(255)",nullable:!0,primary_key:"",auto_increment:!1,default_value:"",foreign_key_table:"",foreign_key_column:"",comment:"",expression:"",stored:"",charset:"",collation:""})},[x,c,m,s]);let j=()=>{m.reset(),a()};return(0,t.jsx)(Z,{open:s,onOpenChange:j,children:(0,t.jsx)(O,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,t.jsxs)("form",{onSubmit:m.handleSubmit(e=>{r({column_name:e.column_name,display_name:e.display_name||null,column_type:e.column_type,nullable:e.nullable,primary_key:e.primary_key?parseInt(e.primary_key):null,auto_increment:e.auto_increment||null,default_value:e.default_value||null,foreign_key:e.foreign_key_table&&e.foreign_key_column?`${e.foreign_key_table}.${e.foreign_key_column}`:null,comment:e.comment||null,expression:e.expression||null,stored:e.stored?"true"===e.stored:null,charset:e.charset||null,collation:e.collation||null})}),children:[(0,t.jsx)(V,{children:(0,t.jsxs)(R,{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{children:"create"===c?"Add New Field":`Edit Field: ${null==x?void 0:x.column_name}`}),"edit"===c&&x&&(0,t.jsx)(v,{variant:"outline",className:"text-xs",children:x.column_name})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-lg",children:"Basic Information"})}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"column-name",children:"Column Name *"}),(0,t.jsx)(o,{id:"column-name",placeholder:"e.g., user_id, email, created_at",...m.register("column_name",{required:"Column name is required"})}),m.formState.errors.column_name&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:m.formState.errors.column_name.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"display-name",children:"Display Name"}),(0,t.jsx)(o,{id:"display-name",placeholder:"Human-readable name (optional)",...m.register("display_name")})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"column-type",children:"Data Type *"}),(0,t.jsx)(n.Qr,{name:"column_type",control:m.control,rules:{required:"Data type is required"},render:e=>{let{field:s}=e;return(0,t.jsxs)(q,{value:s.value,onValueChange:s.onChange,children:[(0,t.jsx)(Q,{children:(0,t.jsx)(K,{})}),(0,t.jsxs)(B,{children:[(0,t.jsx)(U,{value:"INT",children:"INT"}),(0,t.jsx)(U,{value:"BIGINT",children:"BIGINT"}),(0,t.jsx)(U,{value:"VARCHAR(255)",children:"VARCHAR(255)"}),(0,t.jsx)(U,{value:"VARCHAR(50)",children:"VARCHAR(50)"}),(0,t.jsx)(U,{value:"TEXT",children:"TEXT"}),(0,t.jsx)(U,{value:"LONGTEXT",children:"LONGTEXT"}),(0,t.jsx)(U,{value:"DATETIME",children:"DATETIME"}),(0,t.jsx)(U,{value:"TIMESTAMP",children:"TIMESTAMP"}),(0,t.jsx)(U,{value:"DATE",children:"DATE"}),(0,t.jsx)(U,{value:"TIME",children:"TIME"}),(0,t.jsx)(U,{value:"BOOLEAN",children:"BOOLEAN"}),(0,t.jsx)(U,{value:"DECIMAL(10,2)",children:"DECIMAL(10,2)"}),(0,t.jsx)(U,{value:"DECIMAL(15,4)",children:"DECIMAL(15,4)"}),(0,t.jsx)(U,{value:"FLOAT",children:"FLOAT"}),(0,t.jsx)(U,{value:"DOUBLE",children:"DOUBLE"}),(0,t.jsx)(U,{value:"JSON",children:"JSON"})]})]})}}),m.formState.errors.column_type&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:m.formState.errors.column_type.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"comment",children:"Comment"}),(0,t.jsx)(o,{id:"comment",placeholder:"Description of this field",...m.register("comment")})]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-lg",children:"Constraints & Properties"})}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"nullable",children:"Nullable"}),(0,t.jsx)(n.Qr,{name:"nullable",control:m.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(q,{value:s.value.toString(),onValueChange:e=>s.onChange("true"===e),children:[(0,t.jsx)(Q,{children:(0,t.jsx)(K,{})}),(0,t.jsxs)(B,{children:[(0,t.jsx)(U,{value:"true",children:"Yes (NULL allowed)"}),(0,t.jsx)(U,{value:"false",children:"No (NOT NULL)"})]})]})}})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"primary-key",children:"Primary Key"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Qr,{name:"primary_key",control:m.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(q,{value:s.value,onValueChange:s.onChange,children:[(0,t.jsx)(Q,{children:(0,t.jsx)(K,{placeholder:"Not a primary key"})}),(0,t.jsxs)(B,{children:[(0,t.jsx)(U,{value:"",children:"Not a primary key"}),(0,t.jsx)(U,{value:"1",children:"Primary Key (1st)"}),(0,t.jsx)(U,{value:"2",children:"Primary Key (2nd)"}),(0,t.jsx)(U,{value:"3",children:"Primary Key (3rd)"})]})]})}}),(0,t.jsx)(w.Z,{className:"h-4 w-4 text-muted-foreground"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"auto-increment",children:"Auto Increment"}),(0,t.jsx)(n.Qr,{name:"auto_increment",control:m.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(q,{value:s.value.toString(),onValueChange:e=>s.onChange("true"===e),children:[(0,t.jsx)(Q,{children:(0,t.jsx)(K,{})}),(0,t.jsxs)(B,{children:[(0,t.jsx)(U,{value:"false",children:"No"}),(0,t.jsx)(U,{value:"true",children:"Yes"})]})]})}})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"default-value",children:"Default Value"}),(0,t.jsx)(o,{id:"default-value",placeholder:"e.g., NULL, '', 0, CURRENT_TIMESTAMP",...m.register("default_value")})]})]})]}),(0,t.jsxs)(i.Zb,{className:"lg:col-span-2",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"text-lg flex items-center space-x-2",children:[(0,t.jsx)(k.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Foreign Key Relationship"})]})}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"fk-table",children:"Referenced Table"}),(0,t.jsx)(n.Qr,{name:"foreign_key_table",control:m.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(q,{value:s.value,onValueChange:s.onChange,children:[(0,t.jsx)(Q,{children:(0,t.jsx)(K,{placeholder:"Select table"})}),(0,t.jsxs)(B,{children:[(0,t.jsx)(U,{value:"",children:"No foreign key"}),(0,t.jsx)(U,{value:"users",children:"users"}),(0,t.jsx)(U,{value:"departments",children:"departments"}),(0,t.jsx)(U,{value:"projects",children:"projects"}),(0,t.jsx)(U,{value:"categories",children:"categories"})]})]})}})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"fk-column",children:"Referenced Column"}),(0,t.jsx)(n.Qr,{name:"foreign_key_column",control:m.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(q,{value:s.value,onValueChange:s.onChange,children:[(0,t.jsx)(Q,{children:(0,t.jsx)(K,{placeholder:"Select column"})}),(0,t.jsxs)(B,{children:[(0,t.jsx)(U,{value:"",children:"No column"}),(0,t.jsx)(U,{value:"id",children:"id"}),(0,t.jsx)(U,{value:"code",children:"code"}),(0,t.jsx)(U,{value:"slug",children:"slug"})]})]})}})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2 p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)(X.Z,{className:"h-4 w-4 text-blue-500 mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,t.jsx)("p",{className:"font-medium",children:"Foreign Key Format"}),(0,t.jsxs)("p",{children:["Will be saved as: ",(0,t.jsx)("code",{className:"bg-background px-1 rounded",children:"table_name.column_name"})]})]})]})]})]}),(0,t.jsxs)(i.Zb,{className:"lg:col-span-2",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-lg",children:"Advanced Properties"})}),(0,t.jsxs)(i.aY,{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"charset",children:"Character Set"}),(0,t.jsx)(n.Qr,{name:"charset",control:m.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(q,{value:s.value,onValueChange:s.onChange,children:[(0,t.jsx)(Q,{children:(0,t.jsx)(K,{placeholder:"Default"})}),(0,t.jsxs)(B,{children:[(0,t.jsx)(U,{value:"",children:"Default"}),(0,t.jsx)(U,{value:"utf8mb4",children:"utf8mb4"}),(0,t.jsx)(U,{value:"utf8",children:"utf8"}),(0,t.jsx)(U,{value:"latin1",children:"latin1"})]})]})}})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"collation",children:"Collation"}),(0,t.jsx)(n.Qr,{name:"collation",control:m.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(q,{value:s.value,onValueChange:s.onChange,children:[(0,t.jsx)(Q,{children:(0,t.jsx)(K,{placeholder:"Default"})}),(0,t.jsxs)(B,{children:[(0,t.jsx)(U,{value:"",children:"Default"}),(0,t.jsx)(U,{value:"utf8mb4_unicode_ci",children:"utf8mb4_unicode_ci"}),(0,t.jsx)(U,{value:"utf8mb4_general_ci",children:"utf8mb4_general_ci"}),(0,t.jsx)(U,{value:"utf8_general_ci",children:"utf8_general_ci"})]})]})}})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"stored",children:"Stored"}),(0,t.jsx)(n.Qr,{name:"stored",control:m.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(q,{value:s.value,onValueChange:s.onChange,children:[(0,t.jsx)(Q,{children:(0,t.jsx)(K,{placeholder:"Default"})}),(0,t.jsxs)(B,{children:[(0,t.jsx)(U,{value:"",children:"Default"}),(0,t.jsx)(U,{value:"true",children:"Yes"}),(0,t.jsx)(U,{value:"false",children:"No"})]})]})}})]})]})]}),(0,t.jsxs)(i.Zb,{className:"lg:col-span-2",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-lg",children:"Generated Column"})}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"expression",children:"Expression"}),(0,t.jsx)(o,{id:"expression",placeholder:"e.g., CONCAT(first_name, ' ', last_name)",...m.register("expression")})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2 p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)(X.Z,{className:"h-4 w-4 text-amber-500 mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,t.jsx)("p",{className:"font-medium",children:"Generated Columns"}),(0,t.jsx)("p",{children:"Values are automatically calculated based on the expression. Leave empty for regular columns."})]})]})]})]})]}),(0,t.jsx)(h,{}),(0,t.jsxs)(L,{className:"flex justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,t.jsx)(X.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Fields marked with * are required"})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(d.z,{type:"button",variant:"outline",onClick:j,children:[(0,t.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,t.jsxs)(d.z,{type:"submit",children:[(0,t.jsx)(J.Z,{className:"h-4 w-4 mr-2"}),"Save Field"]})]})]})]})})})}var ee=a(3224),es=a(1741),ea=a(5521),et=a(2656),el=a(2243),en=a(4629);let er=a(8894).Z.create({baseURL:"/api",headers:{"Content-Type":"application/json"}}),ei=e=>["schemas",e],ed=e=>["schemas",e,"tables"],ec=(e,s)=>["schemas",e,"tables",s];function eo(e){let{schemaId:s,tableId:a}=e,c=(0,r.s)(),[x,m]=(0,l.useState)(!1),[j,p]=(0,l.useState)(null),{data:f,isLoading:g,error:b}=(0,et.a)({queryKey:ec(s,a),queryFn:async()=>(await er.get(`/schemas/${s}/tables/${a}`)).data.data,enabled:!!s&&!!a}),y=function(e,s){let a=(0,el.NL)();return(0,en.D)({mutationFn:async a=>(await er.put(`/schemas/${e}/tables/${s}`,a)).data,onSuccess:()=>{a.invalidateQueries({queryKey:ec(e,s)}),a.invalidateQueries({queryKey:ed(e)}),a.invalidateQueries({queryKey:ei(e)})}})}(s,a),N=(0,n.cI)({defaultValues:{table_name:a,display_name:"",fields:[],indexes:[]}}),{fields:_,append:w,remove:k,update:C}=(0,n.Dq)({control:N.control,name:"fields"}),{fields:A,append:T,remove:E}=(0,n.Dq)({control:N.control,name:"indexes"});(0,l.useEffect)(()=>{if(f){let e={table_name:f.table_name,display_name:f.display_name||"",fields:f.fields||[],indexes:f.indexes||[]};N.reset(e)}},[f,N]),(0,l.useEffect)(()=>{b&&(ea.Am.error("Failed to load table data"),console.error("Error loading table:",b))},[b]);let Z=async e=>{try{await y.mutateAsync({instance:s,table_name:e.table_name,display_name:e.display_name||void 0}),ea.Am.success("Table saved successfully"),c({to:`/schemas/${s}`})}catch(e){ea.Am.error("Failed to save table"),console.error("Error saving table:",e)}},S=()=>{c({to:`/schemas/${s}`})};return g?(0,t.jsx)("div",{className:"container mx-auto p-6",children:(0,t.jsx)("div",{className:"text-center",children:"Loading..."})}):b?(0,t.jsx)("div",{className:"container mx-auto p-6",children:(0,t.jsx)("div",{className:"text-center text-destructive",children:"Failed to load table data. Please try again."})}):(0,t.jsxs)("form",{onSubmit:N.handleSubmit(Z),children:[(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(d.z,{type:"button",variant:"ghost",size:"sm",onClick:S,children:[(0,t.jsx)(ee.Z,{className:"h-4 w-4 mr-2"}),"Back to Schema"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Table"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Schema: ",(0,t.jsx)(v,{variant:"secondary",children:s})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(d.z,{type:"button",variant:"outline",onClick:S,children:[(0,t.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,t.jsxs)(d.z,{type:"submit",disabled:y.isPending,children:[(0,t.jsx)(J.Z,{className:"h-4 w-4 mr-2"}),y.isPending?"Saving...":"Save Changes"]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{children:"Table Information"})}),(0,t.jsxs)(i.aY,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"table-name",children:"Table Name *"}),(0,t.jsx)(o,{id:"table-name",placeholder:"Enter table name",...N.register("table_name",{required:"Table name is required"})}),N.formState.errors.table_name&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:N.formState.errors.table_name.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"display-name",children:"Display Name"}),(0,t.jsx)(o,{id:"display-name",placeholder:"Enter display name (optional)",...N.register("display_name")})]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(i.ll,{children:"Fields"}),(0,t.jsxs)(d.z,{type:"button",size:"sm",onClick:()=>{p(null),m(!0)},children:[(0,t.jsx)(es.Z,{className:"h-4 w-4 mr-2"}),"Add Field"]})]})}),(0,t.jsx)(i.aY,{children:(0,t.jsx)(z,{fields:_,onEditField:e=>{p(e),m(!0)},onDeleteField:e=>{k(e),ea.Am.success("Field deleted")}})})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(i.ll,{children:"Indexes"}),(0,t.jsxs)(d.z,{type:"button",size:"sm",variant:"outline",onClick:()=>{T({index_name:`idx_${Date.now()}`,columns:[]}),ea.Am.success("Index added")},children:[(0,t.jsx)(es.Z,{className:"h-4 w-4 mr-2"}),"Add Index"]})]})}),(0,t.jsx)(i.aY,{children:(0,t.jsx)(F,{indexes:A,onDeleteIndex:e=>{E(e),ea.Am.success("Index deleted")}})})]}),(0,t.jsx)(h,{}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsxs)(d.z,{type:"button",variant:"outline",onClick:S,children:[(0,t.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,t.jsxs)(d.z,{type:"submit",disabled:y.isPending,children:[(0,t.jsx)(J.Z,{className:"h-4 w-4 mr-2"}),y.isPending?"Saving...":"Save Changes"]})]})]}),(0,t.jsx)(W,{open:x,onClose:()=>m(!1),onSave:e=>{null!==j?(C(j,e),ea.Am.success("Field updated")):(w(e),ea.Am.success("Field added")),m(!1),p(null)},mode:null!==j?"edit":"create",fieldData:null!==j?_[j]:void 0})]})}var ex=a(485);let eu=function(){let{schemaId:e,tableId:s}=ex.A.useParams();return(0,t.jsx)(eo,{schemaId:e,tableId:s})}}}]);